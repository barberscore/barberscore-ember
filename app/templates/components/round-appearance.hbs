<section id="appearance-detail">
  <div class='panel panel-default'>
    <div class='panel-heading fixed-panel-header'>
      {{prev-next model=model sortedArray=sortedAppearances}}
      <h4>
        #{{model.num}}: {{model.competitor.group.name}}
        {{#if (eq model.status 'Variance')}}
          <a href={{model.varianceReport}} target="_blank"><span class="label label-danger">Variance Detected</span></a>
        {{else}}
          {{fa-icon 'check-circle' class='text-success'}}
        {{/if}}
     </h4>
    </div>
    <div class='panel-body'>
      <section>
        {{appearance-details model=model}}
      </section>
      {{#if (or
        (eq model.status 'Started')
        (eq model.status 'Finished')
        (eq model.status 'Variance')
        (eq model.status 'Verified')
      )}}
        <section>
          {{appearance-songs model=model}}
        </section>
      {{/if}}
      {{#if (or
        (eq model.status 'Variance')
        (eq model.status 'Finished')
        (eq model.status 'Verified')
      )}}
        <section>
          {{appearance-panelists model=model}}
          <div class='pull-right'>
            <ul class='list-inline'>
              <li>Practice Points: {{#if model.sumPractice}}{{model.sumPractice}}{{/if}}</li>
              <li>Official Points: {{#if model.sumPractice}}{{model.sumOfficial}}{{/if}}</li>
            </ul>
          </div>
        </section>
      {{/if}}
      {{!-- <hr>
      <section>
        {{log-index model=model}}
      </section> --}}
    </div>
    <div class='panel-footer fixed-panel-footer'>
      <ul class='list-inline'>
        {{#if (eq model.status 'Built')}}
          <li>{{appearance-start model=model}}</li>
          <li>
            {{#bs-button disabled=model.isDisabled onClick=(perform mockAppearance) type="default"}}
              {{#if mockAppearance.isRunning}}
                Mocking {{fa-icon "spinner" spin=true}}
              {{else}}
                Mock Appearance
              {{/if}}
            {{/bs-button}}
          </li>
          {{else if (eq model.status 'Started')}}
          <li>{{appearance-finish model=model}}</li>
          <li>
            {{#bs-button disabled=model.isDisabled onClick=(perform mockAppearance) type="default"}}
              {{#if mockAppearance.isRunning}}
                Mocking {{fa-icon "spinner" spin=true}}
              {{else}}
                Mock Appearance
              {{/if}}
            {{/bs-button}}
          </li>
        {{else if (or (eq model.status 'Finished') (eq model.status 'Variance'))}}
          <li>{{appearance-verify model=model}}</li>
        {{else if (eq model.status 'Verified')}}
          <li>{{appearance-finish model=model}}</li>
        {{/if}}
        <li class='pull-right'><h4>Appearance Status: <strong>{{model.status}}</strong></h4></li>
      </ul>
    </div>
  </div>
</section>
