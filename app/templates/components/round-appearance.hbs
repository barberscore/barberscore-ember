<section id="appearance-detail">
  <div class='card'>
    <div class='card-header'>
      {{prev-next model=model sortedArray=sortedAppearances}}
      <h4>
        #{{model.num}}: {{model.competitor.group.name}}
        {{#if (eq model.status 'Variance')}}
          <a href={{model.varianceReport}} target="_blank"><span class="badge badge-danger">Variance Detected</span></a>
        {{else}}
          {{fa-icon 'check-circle' class='text-success'}}
        {{/if}}
     </h4>
    </div>
    <div class='card-body'>
      <section>
        {{appearance-details model=model}}
      </section>
      {{#if (or
        (eq model.status 'Started')
        (eq model.status 'Finished')
        (eq model.status 'Variance')
        (eq model.status 'Verified')
      )}}
        <section>
          {{appearance-songs model=model}}
        </section>
      {{/if}}
      {{#if (or
        (eq model.status 'Variance')
        (eq model.status 'Finished')
        (eq model.status 'Verified')
      )}}
        <section>
          {{appearance-panelists model=model}}
          <ul class='list-inline float-right'>
            <li class='list-inline-item'>Practice Points: {{#if model.sumPractice}}{{model.sumPractice}}{{/if}}</li>
            <li class='list-inline-item'>Official Points: {{#if model.sumPractice}}{{model.sumOfficial}}{{/if}}</li>
          </ul>
        </section>
      {{/if}}
      {{!-- <hr>
      <section>
        {{log-index model=model}}
      </section> --}}
    </div>
    <div class='card-footer'>
      <ul class='list-inline'>
        {{#if (eq model.status 'Built')}}
          <li class='list-inline-item'>{{appearance-start model=model}}</li>
          <li class='list-inline-item'>
            {{#bs-button disabled=model.isDisabled onClick=(perform mockAppearance) type="default"}}
              {{#if mockAppearance.isRunning}}
                Mocking {{fa-icon "spinner" spin=true}}
              {{else}}
                Mock Appearance
              {{/if}}
            {{/bs-button}}
          </li>
          {{else if (eq model.status 'Started')}}
          <li class='list-inline-item'>{{appearance-finish model=model}}</li>
          <li class='list-inline-item'>
            {{#bs-button disabled=model.isDisabled onClick=(perform mockAppearance) type="default"}}
              {{#if mockAppearance.isRunning}}
                Mocking {{fa-icon "spinner" spin=true}}
              {{else}}
                Mock Appearance
              {{/if}}
            {{/bs-button}}
          </li>
        {{else if (or (eq model.status 'Finished') (eq model.status 'Variance'))}}
          <li class='list-inline-item'>{{appearance-verify model=model}}</li>
        {{else if (eq model.status 'Verified')}}
          <li class='list-inline-item'>{{appearance-finish model=model}}</li>
        {{/if}}
        <li class='list-inline-item float-right'><h4>Appearance Status: <strong>{{model.status}}</strong></h4></li>
      </ul>
    </div>
  </div>
</section>
