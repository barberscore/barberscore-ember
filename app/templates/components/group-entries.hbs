<div class='table-responsive'>
  <table class='table'>
    <thead>
      <tr>
        <th class='col-md-4'>Convention</th>
        <th class='col-md-4'>Venue</th>
        <th class='col-md-2'>Dates</th>
        <th class='col-md-2'>Status</th>
      </tr>
    </thead>
    <tbody>
      {{#each sortedEntries as |entry|}}
        <tr>
          {{#if entry.isLoading}}
            <td colspan=1>Loading&nbsp;{{fa-icon 'spinner' spin=true}}</td>
          {{else}}
            <td>
              {{#link-to 'dashboard.groups.group.entries.entry' entry}}{{entry.session.convention.name}}{{/link-to}}
            </td>
            <td>
              {{entry.session.convention.venue.name}}
            </td>
            <td>
              {{moment-format entry.session.convention.startDate 'L'}} - {{moment-format entry.session.convention.endDate 'L'}}
            </td>
            <td>
              {{entry.status}}
            </td>
          {{/if}}
        </tr>
      {{else}}
        <tr>
          <td>
            (No current entries.)
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
</div>
<div>
  <p>
    {{#bs-button
      type='success'
      disabled=isCreate
      onClick=(action (mut createEntryModal) true)
    }}
      Create New Entry
    {{/bs-button}}
  </p>
</div>
<section>
<p>
    {{#bs-button class='btn btn-link' onClick=(toggle 'customCollapsed' this)}}
      Need more info for contest entry? Click Here.
    {{/bs-button}}
</p>
    {{#bs-collapse collapsed=customCollapsed}}
<p>
<strong>Invitational Contest Entries:</strong>
</p>
<p>You cannot enter this type of contest until your group has been invited by the DRCJ. Once invited, you should receive an invitation email, and you should also see a link to the contest session above. Just click on that link to start the contest entry process. Otherwise (if you feel you should have already been invited), please contact your DRCJ.
</p>
<p>
<strong>Open Contest Entries:</strong>
</p>
<p>
For these types of contests, simply click on the green "Create New Entry" button above. In the New Entry dialog box, click the drop-down menu to scroll through and locate your convention, then click the green "Create Entry" button to start the contest entry process.
</p>
<p>
If you cannot locate your convention, check with your DRCJ to see if it is open for contest entry. Or, if contest entry is now closed (perhaps you missed the entry deadline), you'll need to contact your DRCJ to see if a late entry exception is possible.
</p>
   {{/bs-collapse}}
{{#if (eq model.kind 'Quartet')}}
<p>
    {{#bs-button class='btn btn-link' onClick=(toggle 'customCollapsed2' this)}}
      "Create New Entry" button disabled? Click Here.
    {{/bs-button}}
</p>
    {{#bs-collapse collapsed=customCollapsed2}}
<p>
  You must be designated as your quartet contact (as indicated in the BHS {{member-center}}) to enter your quartet into a contest. At present, the MC allows for only one contact person per quartet. In order to change it to someone else, either the current quartet contact must login to MC to transfer admin rights to another member, or you will need to contact BHS Customer Service to convince them that the contact is unable to do so.
</p>
<p>
If you are the quartet contact (and you’re still not able to enter), submit an inquiry to report the situation to {{customer-support}}.
</p>
    {{/bs-collapse}}
{{else}}
<p>
    {{#bs-button class='btn btn-link' onClick=(toggle 'customCollapsed3' this)}}
      "Create New Entry" button disabled? Click Here.
    {{/bs-button}}
</p>
    {{#bs-collapse collapsed=customCollapsed3}}
<p>
Only the following Chapter Leader roles (as identified in the BHS {{member-center}}) may enter their chorus into a contest: President, Secretary, Director, Associate or Assistant Director, or Chorus Manager. If you need to be added to one of those roles in MC, please communicate with your Chapter President, Secretary, or Treasurer – as only those 3 individuals have the necessary permissions to change or add Chapter Leaders in the BHS Member Center.
</p>
<p>
If you have been added to one of those roles (and you’re still not able to enter), submit an inquiry to report the situation to {{customer-support}}.
</p>
    {{/bs-collapse}}
{{/if}}
</section>
<div>
  {{#bs-modal
    open=createEntryModal
    onHidden=(pipe-action (action (mut createEntryModal) false) (action (mut createEntryModalError) false))
    as |modal|
  }}
    {{#modal.header}}
      <h4>New Entry</h4>
    {{/modal.header}}
    {{#modal.body}}
      <p>
        Please pick a Session to enter.
      </p>
      {{#power-select
        options=sessionOptions
        selected=session
        onchange=(action (mut session))
        placeholder="Choose Session"
        searchField='conventionName'
        allowClear=true
        renderInPlace=true
        noMatchesMessage="We Could Not Find an Open Session with that Name"
        as |session|
      }}
        <div class='row'>
          <div class='col-xs-2'>
            {{#if session.convention.image}}
              <img src={{session.convention.image}} class='img-responsive img-rounded'>
            {{else}}
              <img src='/assets/no_image_available.jpg' class='img-responsive'>
            {{/if}}
          </div>
          <div class='col-xs-10'>
            {{session.convention.name}}<br>
            {{session.kind}} Session<br>
            {{session.convention.venue.city}}, {{session.convention.venue.state}} {{moment-format session.convention.startDate 'L'}} - {{moment-format session.convention.endDate 'L'}}<br>
          </div>
        </div>
      {{/power-select}}
      {{#if createEntryModalError}}
      <p class='text-danger'>
        Could not delete entry.  Please contact support.
      </p>
      {{/if}}
    {{/modal.body}}
    {{#modal.footer}}
      {{#bs-button onClick=(action modal.close) type="default"}}Cancel{{/bs-button}}
      {{#bs-button type='success' onClick=(perform saveEntry session) disabled=isDisabled}}
        {{#if saveEntry.isRunning}}
          Creating {{fa-icon "spinner" spin=true}}
        {{else}}
          Create Entry
        {{/if}}
      {{/bs-button}}
    {{/modal.footer}}
  {{/bs-modal}}
</div>
